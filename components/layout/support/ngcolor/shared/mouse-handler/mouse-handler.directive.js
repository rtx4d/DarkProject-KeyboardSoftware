"use strict";var __decorate=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),MouseHandlerDirective=function(){function e(e){var t=this;this.el=e,this.newValue=new core_1.EventEmitter,this.listenerMove=function(e){t.move(e)},this.listenerStop=function(){t.stop()}}return e.prototype.mousedown=function(e){this.start(e)},e.prototype.touchstart=function(e){this.start(e)},e.prototype.setCursor=function(e){var t=this.el.nativeElement.offsetHeight,o=this.el.nativeElement.offsetWidth,n=Math.max(0,Math.min(this.getX(e),o)),r=Math.max(0,Math.min(this.getY(e),t));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:n/o,v:1-r/t,rgX:this.rgX,rgY:this.rgY,realWorld:{x:n,y:r}}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:r/t,rg:this.rgY,realWorld:{x:n,y:r}}):this.newValue.emit({v:n/o,rg:this.rgX,realWorld:{x:n,y:r}})},e.prototype.move=function(e){e.preventDefault(),this.setCursor(e)},e.prototype.start=function(e){this.setCursor(e),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop)},e.prototype.stop=function(){document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop)},e.prototype.getX=function(e){return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-this.el.nativeElement.getBoundingClientRect().left-window.pageXOffset},e.prototype.getY=function(e){return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-this.el.nativeElement.getBoundingClientRect().top-window.pageYOffset},__decorate([core_1.Output(),__metadata("design:type",Object)],e.prototype,"newValue",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"rgX",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"rgY",void 0),__decorate([core_1.HostListener("mousedown",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Event]),__metadata("design:returntype",void 0)],e.prototype,"mousedown",null),__decorate([core_1.HostListener("touchstart",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Event]),__metadata("design:returntype",void 0)],e.prototype,"touchstart",null),e=__decorate([core_1.Directive({selector:"[appMouseHandler]"}),__metadata("design:paramtypes",[core_1.ElementRef])],e)}();exports.MouseHandlerDirective=MouseHandlerDirective;