"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ConstantArray=System._nodeRequire("./backend/others/ConstantArray"),MacroManager=function(){function t(){this.i18nName="MacroType",this.radioOptions=0,this.nowEditName="",this.tempMacroContent=new MacroScriptContent,this.currentChooseMacroClass=0,this.onEditCSName="",this.macroClassItem=[]}return t.prototype.hasClass=function(){return this.macroClassItem.length>0},t.prototype.getAllMacroFileData=function(){for(var t=[],e=0;e<this.macroClassItem.length;e++){var o=this.macroClassItem[e].MacroFiletItem.map(function(e){console.log("getAllMacroFileData",e),t.push({IndexCode:e.IndexCode,name:e.name})});console.log("getAllMacroFileData_reformattedArray",o)}return console.log("getAllMacroFileData_Tdata",t),t},t.prototype.get_deep_copy_target=function(){return $.extend(!0,{},this.getClass())},t.prototype.getClass=function(){return this.macroClassItem[this.currentChooseMacroClass]},t.prototype.createClassMacroFile=function(t){if(void 0===t&&(t="宏類別"),!(this.getClass().MacroFiletItem.length>50)){console.log("createClassMacroFile_log"),""==t&&(t=this.i18nName);for(var e=!0,o=0,a=t;e;)o>0&&(a=t+o),this.checkNameIsRepeat(a)?o+=1:e=!1;this.getClass().MacroFiletItem.push(new MacroScriptContent(a)),this.updeteEditName(),this.tempMacroContent=this.getClass().getTarget()}},t.prototype.createMacroClass=function(t){void 0===t&&(t="宏類別"),this.macroClassItem.length>19||(console.log("createMacroClass_log=",t),""==t&&(t=this.i18nName),this.macroClassItem.push(new MacroClass(this.createNotRepeatClassName(t))),this.updeteEditClassName())},t.prototype.deleteMacroClass=function(){var t=this.currentChooseMacroClass;this.currentChooseMacroClass-1>=0&&(this.currentChooseMacroClass-=1),this.macroClassItem.splice(t,1)},t.prototype.createNotRepeatClassName=function(t){for(var e=!0,o=0,a=t;e;)o>0&&(a=t+o),this.checkClassNameIsRepeat(a)?o+=1:e=!1;return a},t.prototype.createNotRepeatName=function(t){for(var e=!0,o=0,a=t;e;)o>0&&(a=t+o),this.checkNameIsRepeat(a)?o+=1:e=!1;return a},t.prototype.checkClassNameIsRepeat=function(t){for(var e=0;e<this.macroClassItem.length;e++){var o=this.macroClassItem[e];if(o.className==t)return!0}return!1},t.prototype.checkNameIsRepeat=function(t){for(var e=0;e<this.macroClassItem.length;e++)for(var o=this.macroClassItem[e],a=0;a<o.MacroFiletItem.length;a++)if(t==o.MacroFiletItem[a].name)return!0;return!1},t.prototype.cloneClassMacro=function(){if(!(this.getClass().MacroFiletItem.length>50)&&this.macroClassItem.length>0&&this.getClass().hasFile()){for(var t=$.extend(!0,{},this.getClass().getTarget()),e=t.name,o=!0,a=0;o;)this.checkNameIsRepeat(e+a)?a+=1:(o=!1,e+=a);t.name=e,this.getClass().MacroFiletItem.push(t)}},t.prototype.updeteEditClassName=function(){this.hasClass()&&(this.onEditCSName=this.getClass().className)},t.prototype.updeteEditName=function(){this.getClass().hasFile()&&(this.nowEditName=this.getClass().getTarget().name)},t.prototype.setDefault=function(){},t}();exports.MacroManager=MacroManager;var MacroClass=function(){function t(t){void 0===t&&(t="未命名"),this.MacroFiletItem=[],this.currentChooseMacro=0,this.className="未命名",this.className=t}return t.prototype.intital=function(t){this.currentChooseMacro=0},t.prototype.ImportFileCreateData=function(t){console.log("ImportFileCreateData",t),t=JSON.parse(JSON.stringify(t));for(var e=new MacroScriptContent("沒有"),o=Object.keys(e),a=0;a<o.length;a++)e[o[a]]=t[o[a]];e.IndexCode=(new Date).getTime(),this.MacroFiletItem.push(e),console.log("ImportFileCreateData_PushData",e,typeof t)},t.prototype.ReadFileCreateData=function(t){console.log("ImportFileCreateData",t),t=JSON.parse(JSON.stringify(t));for(var e=new MacroScriptContent("沒有"),o=Object.keys(e),a=0;a<o.length;a++)e[o[a]]=t[o[a]];this.MacroFiletItem.push(e),console.log("ImportFileCreateData_PushData",e,typeof t)},t.prototype.get_deep_copy_target=function(){if(this.hasFile())return console.log("get_deep_copy_target進入"),$.extend(!0,{},this.getTarget())},t.prototype.getTarget=function(){return this.MacroFiletItem[this.currentChooseMacro]},t.prototype.hasFile=function(){return this.MacroFiletItem.length>0},t.prototype.createMacro=function(t){void 0===t&&(t="宏檔案");for(var e=!0,o=t;e;)this.checkNameIsRepeat(o)?(o+="_",console.log("createMacroTname=")):e=!1;console.log("createMacro創造檔案checkNamePass"),this.MacroFiletItem.push(new MacroScriptContent(o))},t.prototype.checkNameIsRepeat=function(t){for(var e=0;e<this.MacroFiletItem.length;e++)if(this.MacroFiletItem[e].name==t)return!0;return!1},t.prototype.deleteMacro=function(){if(this.hasFile())if(this.currentChooseMacro>0){var t=this.currentChooseMacro;this.currentChooseMacro-=1,this.MacroFiletItem.splice(t,1)}else 0==this.currentChooseMacro&&this.MacroFiletItem.splice(this.currentChooseMacro,1)},t.prototype.setDefault=function(){},t}();exports.MacroClass=MacroClass;var MacroScriptContent=function(){function t(t){void 0===t&&(t="未命名"),this.currentlySelectiedPosition=0,this.name="新檔案",this.IndexCode=(new Date).getTime(),this.Data=[],this.name=t}return t.prototype.ImportMacroData=function(t){console.log("ImportMacroData",t);for(var e=Object.keys(this),o=0;o<e.length;o++)for(var a=0;a<e.length;a++)this[e[a]]=t[e[a]]},t.prototype.SaveMacroData=function(t){var e=$.extend(!0,{},t);console.log("SaveMacroData",e),this.Data=e},t.prototype.setDataMs=function(t){this.Data[this.currentlySelectiedPosition]&&(this.Data[this.currentlySelectiedPosition].byDelay=t)},t.prototype.getTarget=function(){if(this.Data[this.currentlySelectiedPosition])return this.Data[this.currentlySelectiedPosition]},t.prototype.move_up_row=function(){if(0!=this.Data.length&&this.currentlySelectiedPosition>0){var t=$.extend(!0,{},this.getTarget());this.Data[this.currentlySelectiedPosition]=this.Data[this.currentlySelectiedPosition-1],this.Data[this.currentlySelectiedPosition-1]=t,this.currentlySelectiedPosition-=1}},t.prototype.move_down_row=function(){if(0!=this.Data.length&&this.currentlySelectiedPosition!=this.Data.length-1){var t=$.extend(!0,{},this.getTarget());this.Data[this.currentlySelectiedPosition]=this.Data[this.currentlySelectiedPosition+1],this.Data[this.currentlySelectiedPosition+1]=t,this.currentlySelectiedPosition+=1}},t.prototype.createInsert=function(){var t={byDelay:5,bKeyDown:1,byKeyCode:65},e={byDelay:5,bKeyDown:0,byKeyCode:65};this.Data.splice(this.currentlySelectiedPosition+1,0,t,e)},t.prototype.createRow=function(t,e,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=0),this.Data.push({byDelay:t,bKeyDown:e,byKeyCode:o}),setTimeout(function(){var t=document.getElementById("MacroContentArea");Math.round(window.innerWidth/100),Math.round(window.innerHeight/100);t&&t.scrollBy(0,t.clientHeight)},50)},t.prototype.deleteRow=function(){var t=this.currentlySelectiedPosition;this.Data.splice(t,1)},t.prototype.clear=function(){this.Data=new Array},t.prototype.setDefault=function(){},t}();exports.MacroScriptContent=MacroScriptContent;