"use strict";var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,f){e.__proto__=f}||function(e,f){for(var t in f)f.hasOwnProperty(t)&&(e[t]=f[t])};return function(f,t){function o(){this.constructor=f}e(f,t),f.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var BoxSelectionArea_1=require("./BoxSelectionArea"),ModeParameter=function(){function e(e){this.frame_selection_range=[],this.coordinateX=0,this.coordinateY=0,this.color_ShowLimit=9,this.red=0,this.green=0,this.blue=0,this.opacity=50,this.direction=!1,this.separate=!1,this.amplitude=200,this.fire=0,this.number=0,this.gap=0,this.randomspeed=0,this.bidirectional=!1,this.bump=0,this.bandwidth=50,this.soft=!1,this.radius=0,this.fixed=!1,this.saturation=0,this.value=0,this.angle=0,this.canEffectCenter=!1,this.gradient=!1,this.color_quantity=9,this.time=.5,this.check=!0,this.color=["#ff0000","#ff8000","#80ff00","#00ff00","#00ffff","#0000ff","#8000ff","#ff00ff","#ff0080","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"];for(var f=0;f<e;f++)this.frame_selection_range.push(!0)}return e}();exports.ModeParameter=ModeParameter;var Wave=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=0,t.iconpath=["./image/ColorSet/Off/Wave.png","./image/ColorSet/On/Wave.png"],t.showlimit=[1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],t.name="Wave",t.speed=5,t.bandwidth=200,t.gradient=!0,t}return __extends(f,e),f}(ModeParameter);exports.Wave=Wave;var ConicBand=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=1,t.iconpath=["./image/ColorSet/Off/ConicBand.png","./image/ColorSet/On/ConicBand.png"],t.showlimit=[1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0],t.canEffectCenter=!0,t.name="ConicBand",t.speed=5,t.bandwidth=100,t.gradient=!0,t}return __extends(f,e),f}(ModeParameter),Spiral=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=2,t.iconpath=["./image/ColorSet/Off/Spiral.png","./image/ColorSet/On/Spiral.png"],t.showlimit=[1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0],t.canEffectCenter=!0,t.name="Spiral",t.speed=5,t.bandwidth=50,t.gradient=!0,t}return __extends(f,e),f}(ModeParameter),Cycle=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=3,t.iconpath=["./image/ColorSet/Off/Cycle.png","./image/ColorSet/On/Cycle.png"],t.showlimit=[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t.name="Cycle",t.speed=2,t.bandwidth=0,t.gradient=!0,t}return __extends(f,e),f}(ModeParameter),LinearWave=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=4,t.iconpath=["./image/ColorSet/Off/LinearWave.png","./image/ColorSet/On/LinearWave.png"],t.showlimit=[1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1],t.name="LinearWave",t.color=["#ff0000","#ff8000","#80ff00","#00ff00","#00ffff","#0000ff","#8000ff","#ff00ff","#ff0080","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"],t.speed=10,t.bandwidth=50,t.bump=!1,t.soft=!0,t.bidirectional=!0,t.gradient=!0,t}return __extends(f,e),f}(ModeParameter),Ripple=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=5,t.iconpath=["./image/ColorSet/Off/Ripple.png","./image/ColorSet/On/Ripple.png"],t.showlimit=[1,1,1,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,0],t.name="Ripple",t.speed=10,t.bandwidth=50,t.gradient=!0,t.soft=!0,t}return __extends(f,e),f}(ModeParameter),Breathing=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=6,t.iconpath=["./image/ColorSet/Off/Breathing.png","./image/ColorSet/On/Breathing.png"],t.showlimit=[1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],t.name="Breathing",t.speed=2,t.bandwidth=500,t.fixed=!0,t}return __extends(f,e),f}(ModeParameter),Rain=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=7,t.iconpath=["./image/ColorSet/Off/Rain.png","./image/ColorSet/On/Rain.png"],t.showlimit=[1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t.name="Rain",t.speed=8,t.bandwidth=500,t.fixed=!0,t.number=5,t}return __extends(f,e),f}(ModeParameter),Fire=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=8,t.iconpath=["./image/ColorSet/Off/Fire.png","./image/ColorSet/On/Fire.png"],t.showlimit=[1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],t.name="Fire",t.color=["#FF2000","#ff8000","#80ff00","#00ff00","#00ffff","#0000ff","#8000ff","#ff00ff","#ff0080","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"],t.color_quantity=1,t.speed=0,t.bandwidth=0,t.gap=0,t.time=0,t.fixed=!0,t.fire=.5,t}return __extends(f,e),f}(ModeParameter),Trigger=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=9,t.iconpath=["./image/ColorSet/Off/Trigger.png","./image/ColorSet/On/Trigger.png"],t.showlimit=[1,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0],t.name="Trigger",t.color=["#FF2000","#ff8000","#80ff00","#00ff00","#00ffff","#0000ff","#8000ff","#ff00ff","#ff0080","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"],t.speed=0,t.bandwidth=0,t.time=3,t.soft=!0,t}return __extends(f,e),f}(ModeParameter),AudioCap=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=10,t.iconpath=["./image/ColorSet/Off/AudioCap.png","./image/ColorSet/On/AudioCap.png"],t.showlimit=[1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],t.check=!0,t.name="AudioCap",t.color=["#FF2000","#ff8000","#80ff00","#00ff00","#00ffff","#0000ff","#8000ff","#ff00ff","#ff0080","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"],t.speed=0,t.bandwidth=0,t.time=3,t.color_quantity=1,t.color_ShowLimit=1,t.amplitude=500,t}return __extends(f,e),f}(ModeParameter),Static=function(e){function f(f){var t=e.call(this,f)||this;return t.sortPosition=11,t.iconpath=["./image/ColorSet/Off/Static.png","./image/ColorSet/On/Static.png"],t.showlimit=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t.name="Static",t.speed=5,t.color_quantity=1,t.color_ShowLimit=1,t.bandwidth=100,t}return __extends(f,e),f}(ModeParameter),Led=function(){function e(e){this.maxkaycapNumber=0,this.ledcoordinates=[],this.AllBlockColor=[],this.mode_name=["Wave","ConicBand","Spiral","Cycle","LinearWave","Ripple","Breathing","Rain","Fire","Trigger","AudioCap","Static"],this.modeClassArr=[],this.recordModeArr=[],this.currentModeIndex=0,this.BSApage1=new BoxSelectionArea_1.BoxSelectionArea("RGBColorBlockStyle"),this.maxkaycapNumber=e,this.modeClassArr=[new Wave(this.maxkaycapNumber),new ConicBand(this.maxkaycapNumber),new Spiral(this.maxkaycapNumber),new Cycle(this.maxkaycapNumber),new LinearWave(this.maxkaycapNumber),new Ripple(this.maxkaycapNumber),new Breathing(this.maxkaycapNumber),new Rain(this.maxkaycapNumber),new Fire(this.maxkaycapNumber),new Trigger(this.maxkaycapNumber),new AudioCap(this.maxkaycapNumber),new Static(this.maxkaycapNumber)],this.recordModeArr=[new Wave(this.maxkaycapNumber)];for(var f=0;f<=this.maxkaycapNumber;f++)this.AllBlockColor.push({color:"#0000",border:!0})}return e.prototype.getNameSortposition=function(e){return console.log("getNameSortposition_indexOf=",this.mode_name.indexOf(e)),this.mode_name.indexOf(e)},e.prototype.ImportLedClassData=function(e){console.log("ImportLedClassData",e);for(var f=Object.keys(this.getTarget()),t=0;t<f.length;t++)""!=f[t]&&(this.getTarget()[f[t]]=e[f[t]])},e.prototype.ImportCreateLedData=function(e){console.log("ImportCreateLedData",e),e=JSON.parse(JSON.stringify(e)),this.recordModeArr.push(e)},e.prototype.getTarget=function(){return this.recordModeArr[this.currentModeIndex]},e.prototype.switchEffectMode=function(e){var f=$.extend(!0,Object.create(Object.getPrototypeOf(this.modeClassArr[e])),this.modeClassArr[e]);console.log("NewswitchEffectMode",f),this.recordModeArr[this.currentModeIndex]=f},e.prototype.deleteChoose=function(){this.recordModeArr.length>1&&this.recordModeArr.splice(this.currentModeIndex,1),this.currentModeIndex-1>=0&&(this.currentModeIndex-=1),this.updateframe_selection_range(),console.log("deleteChoose","=>currentModeIndex"+this.currentModeIndex)},e.prototype.addNewChoose=function(){this.recordModeArr.length>10||this.recordModeArr.push(new Wave(this.maxkaycapNumber))},e.prototype.setModeFrameRange=function(){var e=this.BSApage1.checkArrayisAllTrue(this.AllBlockColor),f=this.BSApage1.selectedEls;if(e)for(var t=0;t<this.BSApage1.selectedEls.length;t++)this.AllBlockColor[f[t]].color="#0000",this.AllBlockColor[f[t]].border=!1;else for(var t=0;t<this.BSApage1.selectedEls.length;t++)this.AllBlockColor[f[t]].color="#FFFFFF",this.AllBlockColor[f[t]].border=!0;console.log("Result_isAllTrue",e),console.log("Result_selectedEls",f);for(var o=this.recordModeArr[this.currentModeIndex],r=0;r<f.length;r++)o.frame_selection_range[f[r]]=!e;return this.updateframe_selection_range(),this.BSApage1.mouseOn=!1,"Finish"},e.prototype.updateframe_selection_range=function(){for(var e=this.recordModeArr[this.currentModeIndex].frame_selection_range,f=0;f<e.length;f++)1==e[f]?this.AllBlockColor[f].border=!0:this.AllBlockColor[f].border=!1},e.prototype.showSelectionRange=function(){for(var e=0;e<this.AllBlockColor.length;e++)this.AllBlockColor[e].border?this.AllBlockColor[e].color="#FFFFFF":this.AllBlockColor[e].color="#0000"},e.prototype.setCoordinate=function(e,f){console.log("setCoordinate",e,f),this.recordModeArr[this.currentModeIndex].coordinateX=e,this.recordModeArr[this.currentModeIndex].coordinateY=f},e.prototype.setDefault=function(){},e}();exports.Led=Led;